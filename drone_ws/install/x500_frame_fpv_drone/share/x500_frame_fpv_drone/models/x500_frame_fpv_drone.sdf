<?xml version="1.0" encoding="UTF-8"?>
<sdf version="1.9">
  <model name="x500_frame_fpv_drone">
    <pose>0 0 0.25 0 0 0</pose>
    <self_collide>false</self_collide>
    <static>false</static>

    <link name="base_link">
      <inertial>
        <mass>0.466180774385218</mass>
        <inertia ixx="0.000277753237068403" ixy="2.6626826811937E-06" ixz="-1.53978574160421E-07"
                 iyy="0.000452011735309793" iyz="2.04117851091923E-08"
                 izz="0.000577089151095544" />
      </inertial>
      <gravity>true</gravity>
      <velocity_decay />


      <visual name="base_link_visual">
        <geometry>
          <mesh>
            <uri>package://x500_frame_fpv_drone/meshes/base_link.STL</uri>
          </mesh>
        </geometry>
        <material>
          <ambient>0.2 0.2 0.2 1.0</ambient>
          <diffuse>0.2 0.2 0.2 1.0</diffuse>
        </material>
      </visual>
      <collision name="collision">
        <geometry>
          <mesh>
            <uri>package://x500_frame_fpv_drone/meshes/base_link.STL</uri>
          </mesh>
        </geometry>
      </collision>

      <sensor name="imu_sensor" type="imu">
        <gz_frame_id>base_link</gz_frame_id>
        <pose>0 0 0 0 0 0</pose>
        <always_on>true</always_on>
        <update_rate>1000.0</update_rate>
        <imu>
          <angular_velocity>
            <x>
              <noise type="gaussian">
                <mean>0.0</mean>
                <stddev>2.0e-4</stddev>
                <bias_mean>0.0000075</bias_mean>
                <bias_stddev>0.0000008</bias_stddev>
              </noise>
            </x>
            <y>
              <noise type="gaussian">
                <mean>0.0</mean>
                <stddev>2.0e-4</stddev>
                <bias_mean>0.0000075</bias_mean>
                <bias_stddev>0.0000008</bias_stddev>
              </noise>
            </y>
            <z>
              <noise type="gaussian">
                <mean>0.0</mean>
                <stddev>2.0e-4</stddev>
                <bias_mean>0.0000075</bias_mean>
                <bias_stddev>0.0000008</bias_stddev>
              </noise>
            </z>
          </angular_velocity>
          <linear_acceleration>
            <x>
              <noise type="gaussian">
                <mean>0.0</mean>
                <stddev>0.0017</stddev>
                <bias_mean>0.1</bias_mean>
                <bias_stddev>0.001</bias_stddev>
              </noise>
            </x>
            <y>
              <noise type="gaussian">
                <mean>0.0</mean>
                <stddev>0.0017</stddev>
                <bias_mean>0.1</bias_mean>
                <bias_stddev>0.001</bias_stddev>
              </noise>
            </y>
            <z>
              <noise type="gaussian">
                <mean>0.0</mean>
                <stddev>0.0017</stddev>
                <bias_mean>0.1</bias_mean>
                <bias_stddev>0.001</bias_stddev>
              </noise>
            </z>
          </linear_acceleration>
        </imu>
      </sensor>

      <sensor name="magnetometer_sensor" type="magnetometer">
        <gz_frame_id>base_link</gz_frame_id>
        <pose>0 0 0 0 0 0</pose>
        <always_on>true</always_on>
        <update_rate>100.0</update_rate>
        <magnetometer>
          <x>
            <noise type="gaussian">
              <mean>0.0</mean>
              <stddev>0.0004</stddev>
            </noise>
          </x>
          <y>
            <noise type="gaussian">
              <mean>0.0</mean>
              <stddev>0.0004</stddev>
            </noise>
          </y>
          <z>
            <noise type="gaussian">
              <mean>0.0</mean>
              <stddev>0.0004</stddev>
            </noise>
          </z>
        </magnetometer>
      </sensor>

      <sensor name="navsat_sensor" type="navsat">
        <gz_frame_id>base_link</gz_frame_id>
        <pose>0 0 0 0 0 0</pose>
        <always_on>true</always_on>
        <update_rate>5.0</update_rate>
        <navsat>
          <horizontal_stddev>2.0</horizontal_stddev>
          <vertical_stddev>2.0</vertical_stddev>
          <drift_xy>0.0</drift_xy>
          <drift_z>0.0</drift_z>
          <reference_latitude>47.397742</reference_latitude>
          <reference_longitude>8.545594</reference_longitude>
          <reference_heading>0</reference_heading>
        </navsat>
      </sensor>

      <sensor name="air_pressure_sensor" type="air_pressure">
        <gz_frame_id>base_link</gz_frame_id>
        <pose>0 0 0 0 0 0</pose>
        <always_on>true</always_on>
        <update_rate>50.0</update_rate>
        <air_pressure>
          <pressure>
            <noise type="gaussian">
              <mean>0.0</mean>
              <stddev>0.0005</stddev>
            </noise>
          </pressure>
        </air_pressure>
      </sensor>
    </link>

    <link name="prop_link_1">
      <pose>-0.1805 0.1805 0.03445 0 0 0</pose>
      <inertial>
        <mass>0.012411</mass>
        <inertia ixx="1.4162E-06" ixy="5.1216E-06" ixz="-7.7441E-13"
                 iyy="3.8656E-05" iyz="-1.051E-13" izz="3.9969E-05" />
      </inertial>
      <visual name="visual">
        <geometry>
          <mesh><uri>package://x500_frame_fpv_drone/meshes/prop_link_1.STL</uri></mesh>
        </geometry>
        <material>
          <ambient>0.05 0.05 0.05 1.0</ambient>
          <diffuse>0.05 0.05 0.05 1.0</diffuse>
        </material>
      </visual>
      <collision name="collision">
        <geometry>
          <mesh><uri>package://x500_frame_fpv_drone/meshes/prop_link_1.STL</uri></mesh>
        </geometry>
      </collision>
    </link>
    <joint name="prop_joint_1" type="revolute">
      <parent>base_link</parent>
      <child>prop_link_1</child>
      <axis><xyz>0 0 1</xyz></axis>
      <limit lower="-1e16" upper="1e16" /> 
      <dynamics>
        <spring_reference>0</spring_reference>
        <spring_stiffness>0</spring_stiffness>
      </dynamics>
    </joint>

    <link name="prop_link_2">
      <pose>-0.1805 -0.1805 0.03445 0 0 0</pose>
      <inertial>
        <mass>0.012411</mass>
        <inertia ixx="3.1266E-06" ixy="-9.3275E-06" ixz="5.4797E-13"
                 iyy="3.6946E-05" iyz="3.2445E-13" izz="3.9969E-05" />
      </inertial>
      <visual name="visual">
        <geometry>
          <mesh><uri>package://x500_frame_fpv_drone/meshes/prop_link_2.STL</uri></mesh>
        </geometry>
        <material>
          <ambient>0.05 0.05 0.05 1.0</ambient>
          <diffuse>0.05 0.05 0.05 1.0</diffuse>
        </material>
      </visual>
      <collision name="collision">
        <geometry>
          <mesh><uri>package://x500_frame_fpv_drone/meshes/prop_link_2.STL</uri></mesh>
        </geometry>
      </collision>
    </link>
    <joint name="prop_joint_2" type="revolute">
      <parent>base_link</parent>
      <child>prop_link_2</child>
      <axis><xyz>0 0 1</xyz></axis>
      <limit lower="-1e16" upper="1e16" />
      <dynamics>
        <spring_reference>0</spring_reference>
        <spring_stiffness>0</spring_stiffness>
      </dynamics>
    </joint>

    <link name="prop_link_3">
      <pose>0.1805 0.1805 0.03445 0 0 0</pose>
      <inertial>
        <mass>0.012411</mass>
        <inertia ixx="3.85373E-05" ixy="5.5366E-06" ixz="-3.1691E-13"
                 iyy="1.5353E-06" iyz="1.1065E-12" izz="3.9968E-05" />
      </inertial>
      <visual name="visual">
        <geometry>
          <mesh><uri>package://x500_frame_fpv_drone/meshes/prop_link_3.STL</uri></mesh>
        </geometry>
        <material>
          <ambient>0.05 0.05 0.05 1.0</ambient>
          <diffuse>0.05 0.05 0.05 1.0</diffuse>
        </material>
      </visual>
      <collision name="collision">
        <geometry>
          <mesh><uri>package://x500_frame_fpv_drone/meshes/prop_link_3.STL</uri></mesh>
        </geometry>
      </collision>
    </link>
    <joint name="prop_joint_3" type="revolute">
      <parent>base_link</parent>
      <child>prop_link_3</child>
      <axis><xyz>0 0 1</xyz></axis>
      <limit lower="-1e16" upper="1e16" />
      <dynamics>
        <spring_reference>0</spring_reference>
        <spring_stiffness>0</spring_stiffness>
      </dynamics>
    </joint>

    <link name="prop_link_4">
      <pose>0.1805 -0.1805 0.03445 0 0 0</pose>
      <inertial>
        <mass>0.012411</mass>
        <inertia ixx="3.1858E-05" ixy="1.527E-05" ixz="-5.0198E-13"
                 iyy="8.2142E-06" iyz="6.8439E-13" izz="3.9969E-05" />
      </inertial>
      <visual name="visual">
        <geometry>
          <mesh><uri>package://x500_frame_fpv_drone/meshes/prop_link_4.STL</uri></mesh>
        </geometry>
        <material>
          <ambient>0.05 0.05 0.05 1.0</ambient>
          <diffuse>0.05 0.05 0.05 1.0</diffuse>
        </material>
      </visual>
      <collision name="collision">
        <geometry>
          <mesh><uri>package://x500_frame_fpv_drone/meshes/prop_link_4.STL</uri></mesh>
        </geometry>
      </collision>
    </link>
    <joint name="prop_joint_4" type="revolute">
      <parent>base_link</parent>
      <child>prop_link_4</child>
      <axis><xyz>0 0 1</xyz></axis>
      <limit lower="-1e16" upper="1e16" />
      <dynamics>
        <spring_reference>0</spring_reference>
        <spring_stiffness>0</spring_stiffness>
      </dynamics>
    </joint>

    <plugin filename="gz-sim-multicopter-motor-model-system"
      name="gz::sim::systems::MulticopterMotorModel">
      <jointName>prop_joint_1</jointName>
      <linkName>prop_link_1</linkName>
      <turningDirection>ccw</turningDirection>
      <timeConstantUp>0.0125</timeConstantUp>
      <timeConstantDown>0.025</timeConstantDown>
      <maxRotVelocity>1000.0</maxRotVelocity>
      <motorConstant>8.54858e-06</motorConstant>
      <momentConstant>0.016</momentConstant>
      <commandSubTopic>command/motor_speed</commandSubTopic>
      <motorNumber>0</motorNumber>
      <rotorDragCoefficient>8.06428e-05</rotorDragCoefficient>
      <rollingMomentCoefficient>1e-06</rollingMomentCoefficient>
      <rotorVelocitySlowdownSim>10</rotorVelocitySlowdownSim>
      <motorType>velocity</motorType>
    </plugin>
    <plugin filename="gz-sim-multicopter-motor-model-system"
      name="gz::sim::systems::MulticopterMotorModel">
      <jointName>prop_joint_2</jointName>
      <linkName>prop_link_2</linkName>
      <turningDirection>ccw</turningDirection>
      <timeConstantUp>0.0125</timeConstantUp>
      <timeConstantDown>0.025</timeConstantDown>
      <maxRotVelocity>1000.0</maxRotVelocity>
      <motorConstant>8.54858e-06</motorConstant>
      <momentConstant>0.016</momentConstant>
      <commandSubTopic>command/motor_speed</commandSubTopic>
      <motorNumber>1</motorNumber>
      <rotorDragCoefficient>8.06428e-05</rotorDragCoefficient>
      <rollingMomentCoefficient>1e-06</rollingMomentCoefficient>
      <rotorVelocitySlowdownSim>10</rotorVelocitySlowdownSim>
      <motorType>velocity</motorType>
    </plugin>
    <plugin filename="gz-sim-multicopter-motor-model-system"
      name="gz::sim::systems::MulticopterMotorModel">
      <jointName>prop_joint_3</jointName>
      <linkName>prop_link_3</linkName>
      <turningDirection>cw</turningDirection>
      <timeConstantUp>0.0125</timeConstantUp>
      <timeConstantDown>0.025</timeConstantDown>
      <maxRotVelocity>1000.0</maxRotVelocity>
      <motorConstant>8.54858e-06</motorConstant>
      <momentConstant>0.016</momentConstant>
      <commandSubTopic>command/motor_speed</commandSubTopic>
      <motorNumber>2</motorNumber>
      <rotorDragCoefficient>8.06428e-05</rotorDragCoefficient>
      <rollingMomentCoefficient>1e-06</rollingMomentCoefficient>
      <rotorVelocitySlowdownSim>10</rotorVelocitySlowdownSim>
      <motorType>velocity</motorType>
    </plugin>
    <plugin filename="gz-sim-multicopter-motor-model-system"
      name="gz::sim::systems::MulticopterMotorModel">
      <jointName>prop_joint_4</jointName>
      <linkName>prop_link_4</linkName>
      <turningDirection>cw</turningDirection>
      <timeConstantUp>0.0125</timeConstantUp>
      <timeConstantDown>0.025</timeConstantDown>
      <maxRotVelocity>1000.0</maxRotVelocity>
      <motorConstant>8.54858e-06</motorConstant>
      <momentConstant>0.016</momentConstant>
      <commandSubTopic>command/motor_speed</commandSubTopic>
      <motorNumber>3</motorNumber>
      <rotorDragCoefficient>8.06428e-05</rotorDragCoefficient>
      <rollingMomentCoefficient>1e-06</rollingMomentCoefficient>
      <rotorVelocitySlowdownSim>10</rotorVelocitySlowdownSim>
      <motorType>velocity</motorType>
    </plugin>
    <plugin filename="MotorFailurePlugin"
      name="gz::sim::systems::MotorFailureSystem">
    </plugin>
    
    <plugin
      filename="libgz-sim-px4-send-control.so"
      name="gz::sim::systems::Px4SendControl">
      <namespace>x500_frame_fpv_drone</namespace>
      <model_name>x500_frame_fpv_drone</model_name>
    </plugin>
  </model>
</sdf>